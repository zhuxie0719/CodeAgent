# DeepSeek API é…ç½®æŒ‡å—

## æ¦‚è¿°

æœ¬ç³»ç»Ÿé›†æˆDeepSeek APIè¿›è¡ŒAIæ™ºèƒ½ä»£ç åˆ†æï¼Œç”Ÿæˆä¸“ä¸šçš„è‡ªç„¶è¯­è¨€æŠ¥å‘Šã€‚æœ¬æŒ‡å—å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é…ç½®å’Œä½¿ç”¨DeepSeek APIåŠŸèƒ½ã€‚

## ğŸ”‘ APIå¯†é’¥é…ç½®

### æ–¹æ³•1: ç¯å¢ƒå˜é‡é…ç½®ï¼ˆæ¨èï¼‰

```bash
# Linux/Mac
export DEEPSEEK_API_KEY="your_api_key_here"

# Windows
set DEEPSEEK_API_KEY=your_api_key_here

# æ°¸ä¹…è®¾ç½®ï¼ˆLinux/Macï¼‰
echo 'export DEEPSEEK_API_KEY="your_api_key_here"' >> ~/.bashrc
source ~/.bashrc
```

### æ–¹æ³•2: ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶

ç¼–è¾‘ `api/deepseek_config.py` æ–‡ä»¶ï¼š

```python
class DeepSeekConfig:
    def __init__(self):
        # ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼
        self.api_key = os.getenv("DEEPSEEK_API_KEY", "sk-75db9bf464d44ee78b5d45a655431710")
        self.base_url = "https://api.deepseek.com/v1"
        self.model = "deepseek-chat"
        self.max_tokens = 2000
        self.temperature = 0.7
```

## ğŸš€ è·å–APIå¯†é’¥

### 1. æ³¨å†ŒDeepSeekè´¦æˆ·
1. è®¿é—® [DeepSeekå¼€æ”¾å¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œè´¦æˆ·å¹¶å®ŒæˆéªŒè¯
3. ç™»å½•åˆ°æ§åˆ¶å°

### 2. åˆ›å»ºAPIå¯†é’¥
1. åœ¨æ§åˆ¶å°ä¸­å¯¼èˆªåˆ°"APIå¯†é’¥"é¡µé¢
2. ç‚¹å‡»"åˆ›å»ºæ–°å¯†é’¥"
3. è®¾ç½®å¯†é’¥åç§°å’Œæƒé™
4. å¤åˆ¶ç”Ÿæˆçš„APIå¯†é’¥

### 3. å……å€¼è´¦æˆ·
1. åœ¨æ§åˆ¶å°ä¸­å¯¼èˆªåˆ°"ä½™é¢"é¡µé¢
2. é€‰æ‹©å……å€¼é‡‘é¢
3. å®Œæˆæ”¯ä»˜æµç¨‹
4. ç¡®è®¤ä½™é¢åˆ°è´¦

## âš™ï¸ é…ç½®å‚æ•°è¯´æ˜

### åŸºç¡€é…ç½®

| å‚æ•° | æè¿° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `api_key` | APIå¯†é’¥ | - | ä»DeepSeekå¹³å°è·å– |
| `base_url` | APIåŸºç¡€URL | `https://api.deepseek.com/v1` | é€šå¸¸ä¸éœ€è¦ä¿®æ”¹ |
| `model` | ä½¿ç”¨çš„æ¨¡å‹ | `deepseek-chat` | æ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ |
| `max_tokens` | æœ€å¤§ç”Ÿæˆtokenæ•° | `2000` | æ§åˆ¶æŠ¥å‘Šé•¿åº¦ |
| `temperature` | ç”Ÿæˆæ¸©åº¦ | `0.7` | æ§åˆ¶åˆ›é€ æ€§ï¼Œ0-1ä¹‹é—´ |

### é«˜çº§é…ç½®

```python
class DeepSeekConfig:
    def __init__(self):
        self.api_key = os.getenv("DEEPSEEK_API_KEY", "your_default_key")
        self.base_url = "https://api.deepseek.com/v1"
        self.model = "deepseek-chat"
        self.max_tokens = 2000
        self.temperature = 0.7
        
        # è¯·æ±‚è¶…æ—¶è®¾ç½®
        self.timeout = 30
        
        # é‡è¯•è®¾ç½®
        self.max_retries = 3
        self.retry_delay = 1
        
        # è¯·æ±‚å¤´è®¾ç½®
        self.headers = {
            "Authorization": f"Bearer {self.api_key}",
            "Content-Type": "application/json"
        }
```

## ğŸ”§ ä½¿ç”¨åœºæ™¯

### 1. å•æ–‡ä»¶åˆ†æ

å½“ä¸Šä¼ å•ä¸ªä»£ç æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šï¼š
1. ä½¿ç”¨ä¼ ç»Ÿå·¥å…·è¿›è¡ŒåŸºç¡€æ£€æµ‹
2. å°†æ£€æµ‹ç»“æœå‘é€ç»™DeepSeek API
3. ç”Ÿæˆä¸“ä¸šçš„è‡ªç„¶è¯­è¨€åˆ†ææŠ¥å‘Š

### 2. é¡¹ç›®åˆ†æ

å½“ä¸Šä¼ é¡¹ç›®æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šï¼š
1. æ‰«æé¡¹ç›®ä¸­çš„æ‰€æœ‰ä»£ç æ–‡ä»¶
2. æŒ‰è¯­è¨€åˆ†ç»„è¿›è¡Œåˆ†æ
3. ç”Ÿæˆé¡¹ç›®çº§åˆ«çš„ç»¼åˆAIæŠ¥å‘Š

### 3. å¤šè¯­è¨€åˆ†æ

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹è¯­è¨€çš„AIåˆ†æï¼š
- **Python**: è¯­æ³•ã€é€»è¾‘ã€å®‰å…¨ã€æ€§èƒ½é—®é¢˜
- **Java**: ç©ºæŒ‡é’ˆã€å†…å­˜æ³„æ¼ã€èµ„æºç®¡ç†
- **C/C++**: ç¼“å†²åŒºæº¢å‡ºã€å†…å­˜æ³„æ¼ã€æŒ‡é’ˆé—®é¢˜
- **JavaScript**: XSSã€å†…å­˜æ³„æ¼ã€å¼‚æ­¥é—®é¢˜
- **Go**: å¹¶å‘å®‰å…¨ã€é”™è¯¯å¤„ç†ã€æ€§èƒ½ä¼˜åŒ–

## ğŸ“Š AIæŠ¥å‘Šç‰¹æ€§

### æŠ¥å‘Šå†…å®¹
- **æ€»ä½“è¯„ä¼°**: ä»£ç è´¨é‡æ•´ä½“è¯„ä»·
- **ä¸»è¦é—®é¢˜åˆ†æ**: é‡ç‚¹é—®é¢˜è¯¦ç»†è¯´æ˜
- **æ”¹è¿›å»ºè®®**: å…·ä½“çš„ä¿®å¤å»ºè®®
- **ä¼˜å…ˆçº§æ’åº**: æŒ‰é‡è¦æ€§æ’åºçš„é—®é¢˜åˆ—è¡¨

### æŠ¥å‘Šæ ¼å¼
- **Markdownæ ¼å¼**: æ”¯æŒä¸‹è½½å’Œåˆ†äº«
- **ç»“æ„åŒ–å†…å®¹**: æ¸…æ™°çš„ç« èŠ‚åˆ’åˆ†
- **ä¸“ä¸šæœ¯è¯­**: ä½¿ç”¨å‡†ç¡®çš„æŠ€æœ¯è¯­è¨€
- **ä¸­æ–‡è¾“å‡º**: ä¾¿äºç†è§£çš„åˆ†ææŠ¥å‘Š

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. APIå¯†é’¥æ— æ•ˆ
**é”™è¯¯ä¿¡æ¯**: `401 Unauthorized`
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤å¯†é’¥æ˜¯å¦å·²æ¿€æ´»
- éªŒè¯å¯†é’¥æƒé™è®¾ç½®

#### 2. ä½™é¢ä¸è¶³
**é”™è¯¯ä¿¡æ¯**: `402 Insufficient Balance`
**è§£å†³æ–¹æ¡ˆ**:
- ç™»å½•DeepSeekæ§åˆ¶å°æ£€æŸ¥ä½™é¢
- è¿›è¡Œè´¦æˆ·å……å€¼
- ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æ¨¡æ‹ŸæŠ¥å‘Šä½œä¸ºå¤‡é€‰

#### 3. è¯·æ±‚è¶…æ—¶
**é”™è¯¯ä¿¡æ¯**: `TimeoutError`
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å¢åŠ è¶…æ—¶æ—¶é—´è®¾ç½®
- å‡å°‘max_tokenså‚æ•°

#### 4. æ¨¡å‹ä¸å¯ç”¨
**é”™è¯¯ä¿¡æ¯**: `404 Model Not Found`
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ¨¡å‹æ˜¯å¦å¯ç”¨
- æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š

```python
import logging

# è®¾ç½®æ—¥å¿—çº§åˆ«
logging.basicConfig(level=logging.DEBUG)

# åœ¨APIè°ƒç”¨ä¸­æ·»åŠ æ—¥å¿—
async def call_deepseek_api(prompt: str) -> str:
    try:
        print(f"ğŸ¤– è°ƒç”¨DeepSeek APIç”ŸæˆçœŸå®AIæŠ¥å‘Š...")
        print(f"APIå¯†é’¥: {deepseek_config.api_key[:10]}...{deepseek_config.api_key[-10:]}")
        
        # APIè°ƒç”¨ä»£ç ...
        
    except Exception as e:
        print(f"âš ï¸ è°ƒç”¨DeepSeek APIå¤±è´¥: {e}")
        return generate_mock_ai_report(prompt)
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. è¯·æ±‚ä¼˜åŒ–
- åˆç†è®¾ç½®`max_tokens`å‚æ•°
- ä½¿ç”¨é€‚å½“çš„`temperature`å€¼
- é¿å…é¢‘ç¹çš„APIè°ƒç”¨

### 2. ç¼“å­˜ç­–ç•¥
- å¯¹ç›¸åŒå†…å®¹çš„åˆ†æç»“æœè¿›è¡Œç¼“å­˜
- è®¾ç½®åˆç†çš„ç¼“å­˜è¿‡æœŸæ—¶é—´
- é¿å…é‡å¤åˆ†æç›¸åŒæ–‡ä»¶

### 3. å¹¶å‘æ§åˆ¶
- é™åˆ¶åŒæ—¶è¿›è¡Œçš„APIè¯·æ±‚æ•°é‡
- ä½¿ç”¨é˜Ÿåˆ—ç®¡ç†è¯·æ±‚
- å®ç°è¯·æ±‚é‡è¯•æœºåˆ¶

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. APIå¯†é’¥å®‰å…¨
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
- ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- å®šæœŸè½®æ¢APIå¯†é’¥

### 2. æ•°æ®éšç§
- ç¡®ä¿ä»£ç å†…å®¹ä¸ä¼šæ³„éœ²
- éµå®ˆæ•°æ®ä¿æŠ¤æ³•è§„
- è€ƒè™‘ä½¿ç”¨æœ¬åœ°æ¨¡å‹ä½œä¸ºå¤‡é€‰

### 3. è®¿é—®æ§åˆ¶
- é™åˆ¶APIè®¿é—®é¢‘ç‡
- ç›‘æ§å¼‚å¸¸ä½¿ç”¨æ¨¡å¼
- å®æ–½é€‚å½“çš„è®¿é—®æ§åˆ¶

## ğŸ“ æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†
```python
# æ¨èï¼šä½¿ç”¨ç¯å¢ƒå˜é‡
api_key = os.getenv("DEEPSEEK_API_KEY")

# ä¸æ¨èï¼šç¡¬ç¼–ç å¯†é’¥
api_key = "sk-1234567890abcdef"
```

### 2. é”™è¯¯å¤„ç†
```python
try:
    result = await call_deepseek_api(prompt)
    return result
except Exception as e:
    logger.error(f"AIåˆ†æå¤±è´¥: {e}")
    return generate_fallback_report()
```

### 3. æ€§èƒ½ç›‘æ§
```python
import time

start_time = time.time()
result = await call_deepseek_api(prompt)
end_time = time.time()

logger.info(f"AIåˆ†æè€—æ—¶: {end_time - start_time:.2f}ç§’")
```

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### 1. å®šæœŸæ£€æŸ¥
- ç›‘æ§APIä½¿ç”¨æƒ…å†µ
- æ£€æŸ¥ä½™é¢çŠ¶æ€
- æ›´æ–°æ¨¡å‹ç‰ˆæœ¬

### 2. é…ç½®å¤‡ä»½
- å¤‡ä»½é…ç½®æ–‡ä»¶
- è®°å½•é…ç½®å˜æ›´
- æµ‹è¯•é…ç½®æ›´æ–°

### 3. ç‰ˆæœ¬ç®¡ç†
- è·Ÿè¸ªAPIç‰ˆæœ¬æ›´æ–°
- æµ‹è¯•æ–°åŠŸèƒ½
- æ›´æ–°æ–‡æ¡£

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### DeepSeekå®˜æ–¹æ”¯æŒ
- [DeepSeekæ–‡æ¡£](https://platform.deepseek.com/docs)
- [APIå‚è€ƒ](https://platform.deepseek.com/api-docs)
- [ç¤¾åŒºè®ºå›](https://community.deepseek.com/)

### ç³»ç»Ÿæ”¯æŒ
- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
- æ£€æŸ¥é…ç½®æ–‡ä»¶
- è”ç³»ç³»ç»Ÿç»´æŠ¤è€…

---

*æœ€åæ›´æ–°: 2024å¹´*

